{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "type": "object",
  "properties": {
    "mode_actions": {
      "type": "object",
      "additionalProperties": {
        "$ref": "#/definitions/mode_action"
      }
    }
  },
  "definitions": {
    "source_event": {
      "type": "object",
      "properties": {
        "operation": {
          "type": "string",
          "enum": [
            "and",
            "or",
            "not"
          ]
        },
        "key_press_event": {
          "$ref": "#/definitions/key_press_event"
        },
        "mouse_click_event": {
          "$ref": "#/definitions/mouse_click_event"
        },
        "dbus_event": {
          "$ref": "#/definitions/dbus_event"
        },
        "window_focus_event": {
          "$ref": "#/definitions/window_focus_event"
        }
      }
    },
    "key_press_event": {
      "properties": {
        "key": {
          "type": "string"
        }
      }
    },
    "mouse_click_event": {
      "properties": {
        "x": {
          "type": "number"
        },
        "y": {
          "type": "number"
        }
      }
    },
    "dbus_event": {
      "properties": {
        "table": {
          "type": "string"
        },
        "action": {
          "type": "string",
          "enum": [
            "insert",
            "update",
            "delete"
          ]
        }
      }
    },
    "window_focus_event": {
      "properties": {
        "window_class": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      }
    },
    "trigger": {
      "type": "object",
      "oneOf": [
        {
          "$ref": "#/definitions/builtin_trigger"
        },
        {
          "$ref": "#/definitions/shell_trigger"
        }
      ]
    },
    "builtin_trigger": {
      "type": "object",
      "properties": {
        "type": "string",
        "enum": [
          "run_or_focus"
        ]
      },
      "value": {
        "type": "string"
      }
    },
    "shell_trigger": {
      "type": "object",
      "properties": {
        "command": {
          "type": "string"
        }
      }
    },
    "set_value": {
      "type": "object",
      "additionalProperties": {
        "anyOf": [{
            "type": "string"
            }, {
            "type": "number"
            }, {
            "type": "boolean"
        }]
      }
    },
    "map_to_keys": {
      "type": "object",
      "properties": {
        "keys": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/key"
          }
        }
      }
    },
    "key": {
      "type": "object",
      "properties": {
        "key": {
          "type": "string"
        },
        "modifiers": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "ctrl",
              "alt",
              "shift"
            ]
          }
        }
      }
    },
    "action": {
      "type": "object",
      "properties": {
        "set_value": {
          "$ref": "#/definitions/set_value"
        },
        "map_to_keys": {
          "$ref": "#/definitions/map_to_keys"
        }
      }
    },
    "trigger_binding": {
      "type": "object",
      "properties": {
        "source_event": {
          "$ref": "#/definitions/source_event"
        },
        "action": {
          "$ref": "#/definitions/action"
        },
        "if": {
          "type": "string"
        }
      }
    },
    "mode_action": {
      "type": "object",
      "properties": {
        "if": {
          "type": "string"
        },
        "triggers": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/trigger_binding"
          }
        }
      }
    }
  }
}